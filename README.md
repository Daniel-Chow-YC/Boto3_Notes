# Boto 3

- Boto3 is the name of the Python SDK for AWS.
- It allows you to directly create, update, and delete AWS resources from your Python scripts.
- The two most commonly used features of boto3 are Clients and Resources

## Client
Clients provide a low-level interface to the AWS service. Their definitions are generated by a JSON service description present in the botocore library.

## Resource
- Resources are a higher-level abstraction compared to clients.
- Resources provide an object-oriented interface for interacting with various AWS services.

## Examples

### Get list of buckets using client
```
import boto3

s3_client = boto3.client('s3')
s3_resource = boto3.resource('s3')

bucket_list = s3_client.list_buckets()['Buckets']

for dic in bucket_list:
    print(dic['Name'])
```

### Look at the contents of a specific bucket
```
import boto3
import pprint as pp

s3_client = boto3.client('s3')
s3_resource = boto3.resource('s3')
bucket_name = 'data-eng-resources'

#bucket_list = s3_client.list_buckets()

bucket_contents = s3_client.list_objects_v2(
    Bucket=bucket_name,
    Prefix='python'
)

pp.pprint(bucket_contents)
```


### Read bucket names using resource
```
import boto3
import pprint as pp

s3_client = boto3.client('s3')
s3_resource = boto3.resource('s3')
bucket_name = 'data-eng-resources'

# Create bucket object
bucket = s3_resource.Bucket(bucket_name)

objects = bucket.objects

contents = objects.all()
for object in contents:
    print(object.key)
  ```


### Load file from S3 into python
```
import boto3
import pprint as pp
import json

s3_client = boto3.client('s3')
s3_resource = boto3.resource('s3')
bucket_name = 'data-eng-resources'

s3_object = s3_client.get_object(
    Bucket=bucket_name,
    Key='python/chatbot-intent.json'
)

strbody = s3_object['Body'].read()
print(strbody)

pp.pprint(json.loads(strbody))
```


### Create a file and Upload onto s3
```
import boto3
import pprint as pp
import json

s3_client = boto3.client('s3')
s3_resource = boto3.resource('s3')
bucket_name = 'data-eng-resources'

s3_object = s3_client.get_object(
    Bucket=bucket_name,
    Key='python/chatbot-intent.json'
)

new_dict = {'name': 'Daniel', 'course': 'Data'}

# Create json file
with open('danielchow.json', 'w') as jsonfile:
    json.dump(new_dict, jsonfile)

# Upload onto S3
s3_client.upload_file(
    Filename='danielchow.json',
    Bucket=bucket_name,
    Key='Test25/danielchow.json'
)

```

### Directly upload a file
```
import boto3
import pprint as pp
import json

s3_client = boto3.client('s3')
s3_resource = boto3.resource('s3')
bucket_name = 'data-eng-resources'

s3_object = s3_client.get_object(
    Bucket=bucket_name,
    Key='python/chatbot-intent.json'
)

new_dict = {'name': 'Daniel', 'course': 'Data'}

s3_client.put_object(
    Body=json.dumps(new_dict),
    Bucket=bucket_name,
    Key='Test25/danielchow2'
)
```
